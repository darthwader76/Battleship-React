(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,a){},16:function(t,e,a){},17:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),o=(a(15),a(2)),h=a(3),l=a(5),c=a(4),p=a(1),u=a(6),d=(a(16),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={turn:!0},a.handleTurn=a.handleTurn.bind(Object(p.a)(a)),a}return Object(u.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){document.title="Battleship"}},{key:"handleTurn",value:function(){this.setState({turn:!this.state.turn})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("a",{className:"ProjectReact-link",href:"https://github.com/darthwader76/Battleship-React",target:"_blank",rel:"noopener noreferrer"},"PROJECT: BATTLESHIP")),r.a.createElement(b,{rows:10,columns:10,player:!0,handleTurn:this.handleTurn,turn:this.state.turn}),r.a.createElement(b,{rows:10,columns:10,player:!1,handleTurn:this.handleTurn,turn:this.state.turn}))}}]),e}(n.Component)),m=function(t,e){var a=new Array(e).fill(!1);return{getName:function(){return t},getLength:function(){return e},hit:function(t){if(t>=e||t<0)throw new Error("not a Vaild position");a[t]=!0},isSunk:function(){return a.every(function(t){return t})}}},f=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={},a}return Object(u.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement("button",{className:"".concat(this.props.ship?"ship ":"").concat(this.props.shot?"shot":""),onClick:this.props.onClick},this.props.shot?"X":"~")}}]),e}(r.a.Component),b=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(c.a)(e).call(this,t))).state={board:new Array(t.rows||10).fill(null).map(function(){return new Array(t.columns||10).fill(null).map(function(){return{ship:null,position:null,shot:!1}})}),availableShips:[m("Carrier",5),m("Battleship",4),m("Cruiser",3),m("Submarine",3),m("Destroyer",2)]},a.ships=[],a.selectedShip=null,a.rotate=!1,a}return Object(u.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){if(!this.props.player){for(var t=this.state.availableShips.slice();t.length>0;)try{var e=Math.floor(Math.random()*t.length),a=Math.floor(Math.random()*this.props.rows),n=Math.floor(Math.random()*this.props.columns);this.placeShip(t[e],a,n,Math.random()>.5),t.splice(e,1)}catch(r){}this.setState({availableShips:t})}}},{key:"placeShip",value:function(t,e,a){if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3]){if(this.state.board.length<e+t.getLength())throw new Error("Ship is to large to be placed there");for(var n=0;n<t.getLength();n++)if(null!=this.state.board[e+n][a].ship)throw new Error("Ships can not overlap");for(var r=this.state.board.slice(),s=0;s<t.getLength();s++)r[e+s][a].ship=t,r[e+s][a].position=s;this.setState({board:r}),this.ships.push(t)}else{if(this.state.board[e].length<a+t.getLength())throw new Error("Ship is to large to be placed there");for(var i=0;i<t.getLength();i++)if(null!=this.state.board[e][a+i].ship)throw new Error("Ships can not overlap");for(var o=this.state.board.slice(),h=0;h<t.getLength();h++)o[e][a+h].ship=t,o[e][a+h].position=h;this.setState({board:o}),this.ships.push(t)}}},{key:"receiveAttack",value:function(t,e){if(this.state.board[t][e].shot)throw new Error("can not shoot the same cords 2x");var a=this.state.board.slice();return a[t][e].shot=!0,this.setState({board:a}),null!=this.state.board[t][e].ship&&(this.state.board[t][e].ship.hit(this.state.board[t][e].position),this.state.board[t][e].ship.isSunk(this.state.board[t][e].ship)&&(this.setState({msg:"The ".concat(this.state.board[t][e].ship.getName()," sunk")}),this.allSunk()&&this.setState({msg:"You ".concat(this.props.player?"Lost":"Won"," the Game")})),!0)}},{key:"allSunk",value:function(){return this.ships.every(function(t){return t.isSunk()})}},{key:"handleClick",value:function(t,e){try{if(null!=this.selectedShip&&this.props.player){this.placeShip(this.state.availableShips[this.selectedShip],t,e,this.rotate);var a=this.state.availableShips.slice();a.splice(this.selectedShip,1),this.setState({availableShips:a}),this.selectedShip=null}else 0===this.state.availableShips.length&&this.props.turn&&!this.props.player&&(this.receiveAttack(t,e),this.props.handleTurn())}catch(n){alert(n.message)}}},{key:"componentDidUpdate",value:function(){if(0===this.state.availableShips.length&&!this.props.turn&&this.props.player)for(var t=!0;t;){var e=Math.floor(Math.random()*this.props.rows),a=Math.floor(Math.random()*this.props.columns);try{this.receiveAttack(e,a),t=!1,this.props.handleTurn()}catch(n){}}}},{key:"render",value:function(){var t=this;return console.log("test"),r.a.createElement("div",{className:"gameBoard ".concat(this.props.player?"player":"computer")},r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"numberRow"}," ",this.state.board[0].map(function(t,e){return r.a.createElement("span",{key:e,className:"column"},e)})," "),this.state.board.map(function(e,a){return r.a.createElement("div",{key:a,className:"row"}," ",a,": ",e.map(function(e,n){return r.a.createElement(f,{key:n,ship:e.ship,position:e.position,shot:e.shot,onClick:function(){return t.handleClick(a,n)}})}))})),this.state.availableShips.length>0&&r.a.createElement("ul",{className:"availableShips"},this.state.availableShips.map(function(e,a){return r.a.createElement("li",{key:a},r.a.createElement("button",{onClick:function(){return t.selectedShip=a}},"".concat(e.getName()," : Size ").concat(e.getLength())))}),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"rotate"}," Rotate "),r.a.createElement("input",{type:"checkbox",id:"rotate",onClick:function(){t.rotate=!t.rotate}}))),this.state.msg)}}]),e}(r.a.Component),v=d;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,a){t.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.b7420893.chunk.js.map